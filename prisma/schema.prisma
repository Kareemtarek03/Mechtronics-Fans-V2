// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id            Int       @id @default(autoincrement())
  email         String    @unique
  firstName     String
  lastName      String
  phone         String?
  gender        String?
  role          String    @default("customer")
  password      String
  emailVerified Boolean   @default(false)
  lastLogin     DateTime?
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt

  passwordResets PasswordReset[]
  adminLogs      AdminLog[]

  @@map("users")
}

model AdminLog {
  id          Int      @id @default(autoincrement())
  adminId     Int
  admin       User     @relation(fields: [adminId], references: [id], onDelete: Cascade)
  action      String
  targetUser  String?
  details     String?
  ipAddress   String?
  createdAt   DateTime @default(now())

  @@map("admin_logs")
}

model PasswordReset {
  id        Int     @id @default(autoincrement())
  userId    Int
  user      User    @relation(fields: [userId], references: [id], onDelete: Cascade)
  token     String  @unique
  expiresAt DateTime
  used      Boolean @default(false)
  createdAt DateTime @default(now())

  @@map("password_resets")
}
model FanData {
  id               Int       @id @default(autoincrement())
  No               Int?
  Model            String?
  AFS              Int?      @map("AF-S")
  AFL              Int?      @map("AF-L")
  WF               Int?
  ARTF             Int?
  SF               Int?
  ABSFC            Int?      @map("ABSF-C")
  ABSFS            Int?      @map("ABSF-S")
  SABF             Int?
  SARTF            Int?
  AJF              Int?
  bladesSymbol     String
  bladesMaterial   String
  noBlades         Int
  bladesAngle      Float
  hubType          Int
  impellerConf     String
  impellerInnerDia Float
  desigDensity     Float
  RPM              Float
  airFlow          Json
  totPressure      Json
  velPressure      Json
  staticPressure   Json
  fanInputPow      Json
  createdAt        DateTime  @default(now())
  updatedAt        DateTime  @updatedAt

  @@map("fan_data")
}

model MotorData {
  id             Int       @id @default(autoincrement())
  material       String?   // can be null
  model          String?   // can be null
  powerKW        Float?    // can be null
  speedRPM       Float?    // can be null
  NoPoles        Int?      // can be null
  rated          Json?     // can be null
  DOL            Json?     // can be null
  starDelta      Json?     // can be null
  powerFactor    Float?    // can be null
  Phase          Int?      // can be null
  frameSize      Int?      // can be null
  shaftDia       Float?    // can be null
  shaftLength    Float?    // can be null
  shaftFeather   Float?    // can be null
  IE             Int?      // can be null
  frontBear      String?   // can be null
  rearBear       String?   // can be null
  noiseLvl       Int?      // can be null
  weightKg       Float?    // can be null
  effCurve       Json?     // can be null
  NoCapacitors   Int?      // can be null
  NoPhases       Int?      // can be null
  insClass       String?   // can be null
  powerHorse     Float?    // can be null
  netpower       Float?    // can be null
  createdAt      DateTime  @default(now())
  updatedAt      DateTime  @updatedAt

  @@map("motor_data")
}

